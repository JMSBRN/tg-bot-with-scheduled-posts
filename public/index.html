<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title>Document</title>
  </head>
  <body>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const button = document.getElementById('b123');
        const root = document.getElementById('root');
        button.addEventListener('click', async () => {
          try {
            const res = await fetch('/.netlify/functions/weather', {
              method: 'POST',
              headers: { 'Content-type':'application/json' },
              body: JSON.stringify({
                city: 'Rome',
                country: 'it'
              })
            });
            const data = await res.text();
            root.innerHTML = data;
          } catch (error) {
            console.error('Error fetching data:', error);
          }
        });
      });
    </script>
    <button id="b123">getWeather</button>
    <div id="root"></div>
  </body>
</html>
